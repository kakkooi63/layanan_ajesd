function selectResult(e,t){if(1==e.length)return e[0].querySelectorAll(t);for(var n=[],a=0;a<e.length;a++){var r=e[a],i=angular.element(r.querySelectorAll(t));n.push.apply(n,i.slice())}return n}function size(e,t){if("undefined"==typeof e)return null;var n,a,r="paddingTop",i="paddingBottom",s="offsetHeight";return"width"==t&&(r="paddingLeft",i="paddingRight",s="offsetWidth"),n=getComputedStyle(e),a=e[s],n&&(a-=parseFloat(n[r])+parseFloat(n[i])),a}var bg=bg||!1;bg||("undefined"!=typeof jQuery?bg=jQuery:"undefined"!=typeof angular&&(bg=angular.element,bg.extend=angular.extend,bg.prototype.is=function(e){for(var t=0;t<this.length;t++){var n=this[t];if((n.matches||n.matchesSelector||n.msMatchesSelector||n.mozMatchesSelector||n.webkitMatchesSelector||n.oMatchesSelector).call(n,e))return!0}return!1},bg.prototype.find=function(e){var t=this[0];if(!t||1!==t.nodeType&&9!==t.nodeType||!angular.isString(e))return[];var n=[];if(">"===e.charAt(0)&&(e=":scope "+e),e.indexOf(":visible")>-1){var a=angular.element(selectResult(this,e.split(":visible")[0]));forEach(a,function(e){angular.element(e).is(":visible")&&n.push(e)})}else n=selectResult(this,e);return n.length?angular.element(1==n.length?n[0]:n):angular.element()},bg.prototype.width=function(){return size(this[0],"width")},bg.prototype.height=function(){size(this[0])})),function(e){"use strict";function t(e,t,n){clearTimeout(s[n]),s[n]=setTimeout(e,t)}function n(t){var n,a=this,t=t||this.addressMapping[this.$element.val()],r=!1;t||(r=!0);for(var i in this.settings.boundElements){var s=this.settings.boundElements[i],o="";if("function"!=typeof s){if(n=e(s),r||!(n.length<0)&&t.cleanData){r||(o="address_components"==i?JSON.stringify(t.cleanData):t.cleanData[i]);for(var l=n.length,d=0;l>d;d++){var g="val",c=n.eq(d);c.is("input, select, textarea")||(g="text"),c[g](o||"")}}}else o=s.call(a,t)}a.$element.parent().find(".suggestions-container").remove(),r||a.$element.triggerHandler("selected.addressPickerByGiro",t)}function a(){var t=this,n=t.settings,a=e.extend({},n.mapOptions);a.center=new google.maps.LatLng(a.center[0],a.center[1]);var r={position:a.center,draggable:!0,raiseOnDrag:!0,map:t.gmap,labelContent:n.text.you_are_here,labelAnchor:new google.maps.Point(0,0),labelClass:n.markerLabelClass,labelStyle:{opacity:1}};if("styled"==n.markerType&&"function"==typeof StyledMarker){var i=new StyledIcon(StyledIconTypes.BUBBLE,{color:"#51A351",fore:"#ffffff",text:n.text.you_are_here});r.styleIcon=i,t.gmarker=new StyledMarker(r)}else t.gmarker="labeled"==n.markerType&&"function"==typeof MarkerWithLabel?new MarkerWithLabel(r):new google.maps.Marker(r);google.maps.event.addListener(t.gmarker,"dragend",function(){t.geocodeLookup(t.gmarker.getPosition(),!1,"latLng",!0)}),google.maps.event.addListener(t.gmap,"click",function(e){t.gmarker.setPosition(e.latLng),t.geocodeLookup(e.latLng,!1,"latLng",!0),t.resizeMap()}),this.gmarker.setVisible(!1)}function r(){var t,n=this,a=n.settings,r=e.extend({},a.mapOptions);r.center=new google.maps.LatLng(r.center[0],r.center[1]),t&&(t=1e3*t),t=t||a.distanceWidgetRadius;var i=new google.maps.Circle({center:r.center,radius:t,strokeColor:"#005DE0",strokeOpacity:.8,strokeWeight:2,fillColor:"#005DE0",fillOpacity:.25,map:n.gmap}),s=function(){i.setEditable(!0)},o=function(){i.setEditable(!1)};n.gcircle=i,n.gcircle.setVisible(!1),google.maps.event.addListener(n.gcircle,"radius_changed",function(){n.updater()}),google.maps.event.addListener(n.gcircle,"mouseover",s),google.maps.event.addListener(n.gcircle,"mouseout",o),n.gcircle.bindTo("center",n.gmarker,"position")}var i,s={};i={init:function(t,n){function a(t){"mouseover"==t.type&&e(this).addClass("mouseishover"),i.$element.is(":focus")&&("hidden"==s.style&&i.$mapContainer.css("display","block"),i.resizeMap())}function r(t){"mouseout"==t.type&&e(this).removeClass("mouseishover"),e(this).hasClass("mouseishover")||i.$element.is(":focus")||"hidden"==s.style&&(i.$mapContainer.css("display","none"),i.$element.parent().find(".suggestions-container").remove())}var i=this;i.$element=t,i.settings=e.extend({},{style:"hidden",map:!1,mapId:!1,mapWidth:"100%",mapHeight:"300px",mapOptions:{zoom:3,center:[51.751724,-1.255284],scrollwheel:!1,mapTypeId:"roadmap"},zoom:!1,makerType:!1,distanceWidget:!1,distanceWidgetRadius:3e4,appendToAddressString:"",geocoderOptions:{language:"en"},searchInitialValue:!0,boundElements:{},text:{you_are_here:"You are here!"},map_rendered:!1},n);var s=i.settings;i.addressMapping={},i.currentItem="",i.geocoder=new google.maps.Geocoder,i.$element.wrap('<div style="position: relative;" class="addresspicker-container"></div>'),i.initMap.call(i);var o=i.$element.parent()[0];o.addEventListener("focus",a,!0),o.addEventListener("blur",r,!0),o.addEventListener("mouseover",a,!0),o.addEventListener("mouseout",r,!0),i.$element.parent().on("keyup",function(){i.$element.addClass("invalid-address").removeClass("valid-address"),i.showSuggestions()}).on("click",function(t){var n=e(t.target);n.is(".suggestions-container li")&&(i.geocodeLookup(n.text(),!1,"",!0),e(this).find(".suggestions-container").remove())}),s.searchInitialValue&&""!=i.$element.val()&&i.geocodeLookup(i.$element.val(),!1,"",!0)},initMap:function(){var t=this,n=t.settings;if(n.mapId||n.map instanceof google.maps.Map?t.$mapContainer=e(n.mapId):(n.mapId=(new Date).getTime()+Math.floor(9999999*Math.random()+1),t.$mapContainer=e('<div style="margin: 5px 0; width: '+n.mapWidth+"; height: "+n.mapHeight+';" id="'+n.mapId+'"></div>'),t.$element.after(t.$mapContainer)),"hidden"==n.style&&t.$mapContainer.css("display","none"),1==t.map_rendered)return void t.resizeMap.call(t);var i=e.extend({},n.mapOptions);this.settings.map instanceof google.maps.Map?this.gmap=this.settings.map:(i.center=new google.maps.LatLng(i.center[0],i.center[1]),this.gmap=new google.maps.Map(t.$mapContainer[0],i)),a.call(this),this.settings.distanceWidget&&r.call(this),t.map_rendered=!0},showSuggestions:function(){var e=this;t(function(){e.geocodeLookup(e.$element.val(),function(){var t='<div style="position: absolute;z-index: 2000;background:#fff;" class="suggestions-container"><ul>';for(var n in this.addressMapping)t+="<li>"+n+"</li>";t+="</ul></div>",e.$element.next().hasClass("suggestions-container")&&e.$element.next().remove(),e.$element.after(t)},!1,!1,!0)},250,"source")},updater:function(e){var t,a,r=this,e=e||r.$element.val(),i=this.addressMapping[e]||!1,s={};if(i){if(a=i.geometry.location,t={country:{long_name:"country",short_name:"country_code"},administrative_area_level_1:{long_name:"region",short_name:"region_code"},administrative_area_level_2:{long_name:"county",short_name:"county_code"},locality:{long_name:"city"},sublocality:{long_name:"city_district"},postal_code:{long_name:"zip"},route:{long_name:"street"},street_number:{long_name:"street_number"}},i.address_components)for(var o=0;o<i.address_components.length;o++){var l=i.address_components[o];for(var d in t)if(l.types.indexOf(d)>=0)for(var g in t[d])"undefined"!=typeof l[g]&&(s[t[d][g]]=l[g])}return s.latitude=Number(a.lat().toFixed(8)),s.longitude=Number(a.lng().toFixed(8)),s.formatted_address=i.formatted_address,r.gmarker&&(r.gmarker.setPosition(i.geometry.location),r.gmarker.setVisible(!0)),r.gcircle&&(r.gcircle.setCenter(i.geometry.location),r.gcircle.setVisible(!0),s.radius=Math.round(r.gcircle.getRadius())/1e3),r.gmap.fitBounds(r.gcircle?r.gcircle.getBounds():i.geometry.viewport),i.cleanData=s,n.call(r,i),e}},currentAddress:function(){return this.addressMapping[this.$element.val()]||{}},geocodeLookup:function(t,a,r,i,s){i=i||!1,r=r||"";var o=this,l=o.settings,d=e.extend({},l.geocoderOptions);if(i&&n.call(o),"latLng"==r)"string"==typeof t&&(t=t.split(","),t=new google.maps.LatLng(t[0],t[1])),d.latLng=t;else if(d.address=t+l.appendToAddressString,!s&&"function"==typeof a&&"undefined"!=typeof o.addressMapping[t])return void(i&&o.updater(t));this.geocoder.geocode(d,function(e,t){if(t===google.maps.GeocoderStatus.OK){o.addressMapping={};for(var n=0;n<e.length&&9>n;n++){var r=e[n];o.addressMapping[r.formatted_address]=r}if("function"==typeof a&&a.call(o,e),i){var s=e[0].formatted_address;o.$element.val(s).addClass("valid-address").removeClass("invalid-address"),o.addressMapping[s]=e[0],o.updater(s)}}})},resizeMap:function(n,a){var r=this;t(function(){var t,i=r.settings,s=r.$mapContainer?r.$mapContainer.parent():e("#"+i.mapId).parent();if(s.length){{var o=s.parent();o.height(),o.width()}t="undefined"!=typeof n&&"undefined"!=typeof a?new google.maps.LatLng(n,a):r.gmap.getCenter(),i.zoom&&r.gmap.setZoom(i.zoom),google.maps.event.trigger(r.gmap,"resize"),r.gmap.setCenter(t)}},300,"resize")},setRadius:function(e){var t=this;t.gcircle&&(t.gcircle.setRadius(1e3*e),t.gmap.fitBounds(t.gcircle.getBounds()))}};var o=function(t){var n=this.data("addressPickerByGiro");if(n)return"string"==typeof t&&n[t]?n[t].apply(n,Array.prototype.slice.call(arguments,1)):console.log("Method "+t+" does not exist on jQuery.addressPickerByGiro");if(!t||"object"==typeof t){for(var a=this.length,r=0;a>r;r++){var s=e(this[r]);n=e.extend({},i),n.init(s,t),s.data("addressPickerByGiro",n)}return this}return console.log('jQuery.addressPickerByGiro is not instantiated. Please call $("selector").addressPickerByGiro({options})')};e.fn?e.fn.addressPickerByGiro=o:e.prototype.addressPickerByGiro=o}(bg);